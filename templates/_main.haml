%%namespace(name='utils', file='_utils.haml')
-!
    from flask.ext.login import current_user
!!! 5
%head

    %link(rel="stylesheet", href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css")
    %link(rel="stylesheet", href=static('/css/screen.css'))
    %link(rel="icon", href="/favicon.ico")
    
    %title Git Base

%body

    #root.container
        
        %ol.breadcrumb

            - if current_user.is_authenticated():
                %.pull-right
                    %a(href=url_for('user', user=current_user))
                        %strong &= current_user.name

                    .btn-group.btn-group-xs
                        - if any(role in current_user.roles for role in ('wheel', 'observer')):
                            %a.btn.btn-primary(href=url_for('cpanel'))
                                +utils.icon('cog')
                                Admin
                        
                        %a.btn.btn-default(href=url_for('logout'))
                            +utils.icon('log-out')
                            Logout
            - elif request.endpoint != 'login':
                %.pull-right %a.btn.btn-primary.btn-xs(href=url_for('login'))
                    +utils.icon('log-in')
                    Login

            %li
                %a(href='/') %img(src="/img/git-logo.png")
            = next.breadcrumb()


        - for class_, message in get_flashed_messages(with_categories=True):
            - class_ = 'info' if class_ == 'message' else class_
            %.alert(class_='alert-' + class_) &= message

        = next.body()

        #root-footer

    #footer.container
        %%include(file='_footer.haml')


-# Just a stub.
@breadcrumb

