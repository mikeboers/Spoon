%%inherit(file='/_main.haml')

%h1 Permissions


- for group in groups:

    %table.table.table-condensed
        %thead
            %th Object
            - for user in users: %th &= user.name
    
        %tr
            %td &= group.name
            - for user in users: %td
                - if auth.can('group.read', group, current_user=user):
                    .span.label.label-success READ
                - if auth.can('group.write', group, current_user=user):
                    .span.label.label-warning WRITE
                - if auth.can('group.delete', group, current_user=user):
                    .span.label.label-danger DELETE


        - for repo in group.repos: %tr
            %td &= group.name + ' / ' + repo.name
            - for user in users: %td
                - if auth.can('repo.read', repo, current_user=user):
                    .span.label.label-success READ
                - if auth.can('repo.write', repo, current_user=user):
                    .span.label.label-warning WRITE
                - if auth.can('repo.delete', repo, current_user=user):
                    .span.label.label-danger DELETE