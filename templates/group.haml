%%inherit(file='/_main.haml')
%%namespace(name='repo_utils', file='repo.haml')
%%namespace(name='user_utils', file='user.haml')

@breadcrumb
    %li
        &= group.name
    %li
        repositories


@render_card(group, link=True, avatar_size=64)

    .media

        - url = url_for('group', group=group)
        
        %a.pull-left(href=url)
            %img.thumbnail.media-object(src=resized_img_src('/img/git-logo-pale.png', width=avatar_size, height=avatar_size), width=avatar_size, height=avatar_size)

        .media-body
            %h4.media-heading
                
                @title
                    - if not group.is_public:
                        %span.glyphicon.glyphicon-lock
                    = group.name

                - if link: %a(href=url) = title()
                - else: = title()
            %p&= 'No description.'
            %small
                %span.glyphicon.glyphicon-book
                ${len(group.readable_repos)} ${'repository' if len(group.readable_repos) == 1 else 'repositories'}
            %br/
            %small
                %span.glyphicon.glyphicon-user
                ${len(group.members)} user${'s' if len(group.members) != 1 else ''}
            - if not group.is_public:
                %p %small %span.label.label-warning PRIVATE


= render_card(group, link=False, avatar_size=128)


%h2 Repositories

- for repo in group.readable_repos:
    = repo_utils.render_card(repo)
- if not group.readable_repos:
    .alert.alert-warning No repositories.

%h2 Members

- if group.members:
    - for user in group.members:
        = user_utils.render_card(user)

- else:
    %em No members.
